# **Tic-Tac-Toe SPA Project**

[**View the application here**](https://adamdeguire.github.io/tic-tac-toe/#)

## **Introduction**

-----------------------

In my first-ever software engineering project, I've created an **HTML**/**CSS**/**JavaScript** front-end single page application wherein a user can:

- **Sign up** with an email and password
- **Sign in**, **sign out**, and **change passwords**
- **Create**, **update**, and **save** Tic-Tac-Toe games on a server
- View **game statistics** like games played, games won, ties, etc.
- Play against a **computer opponent** on three separate **difficulty settings**
- Use/play on any size screen or device thanks to **responsive application design**

### **The technical focus of this project is primarily on the following:**

- Client-Server communication via Asynchronous JavaScript and XML (**AJAX**)
- Mobile-first application design with **Bootstrap** and **SASS**
- DOM traversal and manipulation via **jQuery**
- Single Page Application (**SPA**) design
  
<p>&nbsp;</p>

---

## **Application Overview**

---

### **Sign-In/Out View**

<img src="https://i.imgur.com/5e9Pi0n.jpg" alt="signInLight" width="200"/>
<img src="https://i.imgur.com/POvWxoC.jpg" alt="signInDark" width="200"/>

Here, the user can sign up or sign in to the application, as well as receive relevant feedback on any errors in input. The **Sign-In** and **Sign-Up** views can be fluidly toggled thanks to the **jQuery** ```.hide('slow')``` and ```.show('slow')``` methods used in conjunction with the **JavaScript** ```setTimeout()``` method. This same process is utilized throughout the application to smooth changes between views. The user is returned to this view upon signing out.

### **Main Menu View**

<img src="https://i.imgur.com/gkKAwwl.jpg" alt="mainMenuLight" width="200"/>
<img src="https://i.imgur.com/5Y5BhCa.jpg" alt="mainMenuDark" width="200"/>

On the **Main Menu**, the user is able to access a variety of app features, as seen in the above images. From here, they can begin a new game, view game statistics, view their account settings, change computer player difficulty, and sign out. On mobile devices (or any other devices with a screen height under 650px), the **Sign Out** button at the bottom can be toggled in and out of view by tapping the bottom of the screen. When toggled down, the very top of the button is still visible to the user.

### **Game View**

<img src="https://i.imgur.com/hukBc2n.jpg" alt="gameViewLight" width="200"/>
<img src="https://i.imgur.com/fgaJ9Rw.jpg" alt="gameViewDark" width="200"/>

Here, the user can play Tic-Tac-Toe locally against another human player (or against themselves, no shame in that), or against a computer player. This option can be toggled by clicking or tapping the **Play AI**/**Play Human** option shown above. The game can be restarted at any time. At the end of a game, the text of the **Restart** button transitions to **Again?** and confetti rains down from the top of the screen. On every move, an HTTP ```PATCH``` request is made to the game API to update the current game.

### **Statistics View**

<img src="https://i.imgur.com/1nvS5ny.jpg" alt="statsViewLight" width="200"/>
<img src="https://i.imgur.com/CP4zHmF.jpg" alt="statsViewDark" width="200"/>

In this view, a table of game statistics is displayed to the user, generated by processing data returned from an HTTP ```GET``` request to the game API.

### **Account View**

<img src="https://i.imgur.com/9r9Rpoh.jpg" alt="accountLight" width="200"/>
<img src="https://i.imgur.com/b4ZOukc.jpg" alt="accountDark" width="200"/>

Here, a user can alternate between the light and dark modes as seen in all application screenshots above. This is accomplished by setting CSS attributes of all relevant HTML elements via the **jQuery** ```.css()``` method. The CSS attribute ```transition``` assigned to all affected elements allows this change to happen smoothly over a defined period, rather than instantaneously.
<p>&nbsp;</p>

---

## **Technical Details**

---

### **Sign Up/In/Out and Change Password**

User authentication in this application is made possible via AJAX calls to a provided API. These calls were made via the **jQuery** ```.ajax()``` method. For Sign Up and Sign In, data from form fields is pulled from the page and formatted to a **JSON** object for use in their respective **HTTP** requests. Below is an example of how these functions have been implemented.

```js
// Request new user creation
const signUp = (data) => {
  return $.ajax({
    url: `${config.apiUrl}/sign-up`,
    method: 'POST',
    data: data
  })
    .then(ui.onSignUpSuccess)
    .catch(ui.onSignUpFailure)
}
```

### **Create, Update, and Save Games**

Games in this application are created and updated via AJAX calls to another API provided specifically for game data. Like the previous calls, these calls were also made via **jQuery** ```.ajax()```. These requests require user authentication via unique tokens provided at each log-in instance.

```js
// Request update of existing game object for existing user
const updateGame = (index, marker, over) => {
  return $.ajax({
    url: `${config.apiUrl}/games/${store.gameId}`,
    method: 'PATCH',
    headers: {
      Authorization: `Bearer ${store.token}`
    },
    data: {
      game: {
        cell: {
          index: index,
          value: marker
        },
        over: over
      }
    }
  })
    .catch(nav.onFailure)
}
```

### **Game Statistics**

Game statistics are calculated by manipulating properties of the response object of an API call to retrieve all games logged to a user's account. Example for calculating game length in minutes and seconds below.

```js
  gamesCompleted.forEach(game => {
    const start = new Date(game.createdAt)
    const end = new Date(game.updatedAt)
    gameLengths.push(((end - start) / 1000).toFixed(2))
  })
  const gameTime = (time) => {
    let m = ''
    if (time >= 60) {
      m = Math.floor(time / 60)
    }
    const s = (time - (m * 60)).toFixed(2)
    if (m !== '') {
      m += 'm '
    }
    return `${m} ${s}s`
  }
```

### **Computer Opponent**

The computer opponent calculates game moves by running through a series of functions to check for the following:

- Rows/columns/diagonals free of the opponent's marker
- Possible winning moves on the current turn
- Opponent's possible winning moves on the their next turn
- Randomly selected available spaces on the board

Below is the implemented win check function:

```js
const winThisTurn = (marker) => {
  for (let i = 0; i < 9; i++) {
    const board = logic.getBoard()
    if (board[i] === ' ') { board[i] = marker }
    if (logic.gameWon(marker, board)) return i
  }
}
```

### **Computer Difficulty Settings**

Difficulty settings are achieved by selecting options from the above functions in a variety of ways.

On the **Easy** difficulty, all possible moves returned from the above functions are concatenated into an array, followed by a number of random choices totalling around half of the current options array's length. A move is then randomly selected from this array. This results in a 66% chance of a intelligent, calculated move by the computer player.

**Medium** difficulty follows the same pattern as Easy, though with only half the number of random options pushed into the current options array. This results in an 80% chance of an intelligent, calculated move by the computer player.

On **Hard**, the selection process functions uniquely to the previous two settings. Here, a move is selected by precedence, rather than randomly from an array. The order of that precedence is as follows:

- Make any move that will **win** the game on the current turn.
- Make any move that will prevent a **loss** on the opponent's next turn.
- Identify the row, column, or diagonal that is **closest** to a win and place a marker somewhere within.
- If no other options have been generated, select a **random** space.

Code excerpts from these settings are below.

```js
    // excerpt from Difficulty: Easy
      count = Math.floor(choices.length / 2)
      for (let i = 0; i < count; i++) {
        const rand = randomMove()
        choices.push(rand)
      }


      // excerpt from Difficulty: Hard
      if (Number.isInteger(winThisTurn('o'))) { return winThisTurn('o') }
      if (Number.isInteger(winThisTurn('x'))) { return winThisTurn('x') }
      if (options.length > 1) return choice
      return randomMove(marker)
```

### **Responsive Application Design**

One of the core focal points of this project is **responsive layout**. In many instances, screen height, screen width, and aspect ratio breakpoints have been added to reformat the application to the user's preferred platform.

In addition, **variable values** have been used over definite ones for font sizes and element dimensions to provide a dynamic experience for the user.

CSS examples below.

```css
#gameStats {
  margin-left: auto;
  margin-right: auto;
  font-size: calc(16px + 6 * ((100vw - 320px) / 680));
}

@media only screen and (max-width: 600px) {
  body {
    width: 80vw;
  }
  .menuBtn {
    margin: 30% auto;
  }
}

@media (min-aspect-ratio: 9/10) {
  body {
    overflow: scroll;
  }
}
```

<p>&nbsp;</p>

---

## **Initial Wireframe**

---

The below images were the initial layout plan for the application. The final product shows some drastic changes from these designs, most of which were made in favor of a more **mobile-first** approach.

### Login
![Login Wireframe](https://i.imgur.com/uzY4kCJ.png)

### Game
![Game Wireframe](https://i.imgur.com/4BZxNkw.png)

<p>&nbsp;</p>

---

## **Technologies Used**

---

- HTML
- CSS
- SASS
- JavaScript
- jQuery
- Bootstrap

<p>&nbsp;</p>

---

## **Link**

---

[**View the application here**](https://adamdeguire.github.io/tic-tac-toe/#)
